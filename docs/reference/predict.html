<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Predict from a brokenstick model — predict.brokenstick • brokenstick</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Predict from a brokenstick model — predict.brokenstick" />
<meta property="og:description" content="The predictions from a broken stick model coincide with the
group-conditional means of the random effects. This function takes
an object of class brokenstick and returns predictions
in one of several formats. The user can calculate predictions
for new persons, i.e., for persons who are not part of
the fitted model, through the x and y arguments." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">brokenstick</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">2.0.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/brokenstick.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/mainfunctions.html">Overview of main functions</a>
    </li>
    <li>
      <a href="../articles/brokenstick-article.html">Broken Stick Model for Irregular Longitudinal Data</a>
    </li>
    <li>
      <a href="../articles/perfectmodel.html">Check perfect model</a>
    </li>
    <li>
      <a href="../articles/oldfriends.html">Help for old friends</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/growthcharts/brokenstick/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Predict from a <code>brokenstick</code> model</h1>
    <small class="dont-index">Source: <a href='https://github.com/growthcharts/brokenstick/blob/master/R/predict.R'><code>R/predict.R</code></a></small>
    <div class="hidden name"><code>predict.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>The predictions from a broken stick model coincide with the
group-conditional means of the random effects. This function takes
an object of class <code>brokenstick</code> and returns predictions
in one of several formats. The user can calculate predictions
for new persons, i.e., for persons who are not part of
the fitted model, through the <code>x</code> and <code>y</code> arguments.</p>
    </div>

    <pre class="usage"><span class='co'># S3 method for brokenstick</span>
<span class='fu'><a href='https://rdrr.io/r/stats/predict.html'>predict</a></span><span class='op'>(</span>
  <span class='va'>object</span>,
  newdata <span class='op'>=</span> <span class='cn'>NULL</span>,
  <span class='va'>...</span>,
  x <span class='op'>=</span> <span class='cn'>NULL</span>,
  y <span class='op'>=</span> <span class='cn'>NULL</span>,
  group <span class='op'>=</span> <span class='cn'>NULL</span>,
  strip_data <span class='op'>=</span> <span class='cn'>TRUE</span>,
  shape <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"long"</span>, <span class='st'>"wide"</span>, <span class='st'>"vector"</span><span class='op'>)</span>,
  what <span class='op'>=</span> <span class='cn'>NULL</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>object</th>
      <td><p>A <code>brokenstick</code> object.</p></td>
    </tr>
    <tr>
      <th>newdata</th>
      <td><p>Optional. A data frame in which to look for variables with
which to predict. The training data are used if omitted and
if <code>object$light</code> is <code>FALSE</code>.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Not used, but required for extensibility.</p></td>
    </tr>
    <tr>
      <th>x</th>
      <td><p>Optional. A numeric vector with values of the predictor. It could
also be the special keyword <code>x = "knots"</code> replaces <code>x</code> by the
positions of the knots.</p></td>
    </tr>
    <tr>
      <th>y</th>
      <td><p>Optional. A numeric vector with measurements.</p></td>
    </tr>
    <tr>
      <th>group</th>
      <td><p>A vector with group identifications</p></td>
    </tr>
    <tr>
      <th>strip_data</th>
      <td><p>A logical indicating whether the row with the
observed data from <code>newdata</code> should be stripped from the
return value. The default is <code>TRUE</code>. Set to <code>FALSE</code> to infer which data
points are extracted from <code>newdata</code>. Works best for <code>shape = "long"</code>.</p></td>
    </tr>
    <tr>
      <th>shape</th>
      <td><p>A string: <code>"long"</code> (default), <code>"wide"</code> or <code>"vector"</code>
specifying the shape of the return value. Note that use of <code>"wide"</code>
with many unique values in <code>x</code> creates an unwieldy, large
and sparse matrix.</p></td>
    </tr>
    <tr>
      <th>what</th>
      <td><p>Which knots to predict when <code>x = "knots"</code>? See <code><a href='get_knots.html'>get_knots()</a></code>.
The default, <code>NULL</code>, calculates all knots.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>If <code>shape == "long"</code> a long tibble of predictions. If <code>x</code>, <code>y</code> and <code>group</code>
are not specified, the number of rows in the tibble is guaranteed to
be the same as the number of rows in <code>newdata</code>.</p>
<p>If <code>shape == "wide"</code> a wide tibble of prediction, one record per group. Note
that this format could be inefficient, depending on the data.</p>
<p>If <code>shape == "vector"</code> a vector of predicted values, of all x-values and groups.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>By default, <code><a href='https://rdrr.io/r/stats/predict.html'>predict()</a></code> calculates predictions for every row in
<code>newdata</code>. If the user specifies no <code>newdata</code> argument, then the
function searches <code>object</code> for the training data (which are only
available if <code>object$light</code> is <code>FALSE</code>).
It is possible to tailor the behaviour of <code><a href='https://rdrr.io/r/stats/predict.html'>predict()</a></code> through the
<code>x</code>, <code>y</code> and <code>group</code> arguments. What exactly happens depends on
which of these arguments is specified:</p><ol>
<li><p>If the user specifies <code>x</code>, but no <code>y</code> and <code>group</code>, the function
returns - for every group in <code>newdata</code> - predictions at the
specified <code>x</code> values. This method will use the data from <code>newdata</code>.</p></li>
<li><p>If the user specifies <code>x</code> and <code>y</code> but no <code>group</code>, the function
forms a hypothetical new group with the <code>x</code> and <code>y</code> values. This
method uses no information from <code>newdata</code>, and also works for
a light <code>brokenstick</code> object.</p></li>
<li><p>If the user specifies <code>group</code>, but no <code>x</code> or <code>y</code>, the function
searches for the relevant data in <code>newdata</code> and limits its
predictions to those groups. This is useful if the user needs
a prediction for only one or a few groups. This does not work for
a light <code>brokenstick</code> object.</p></li>
<li><p>If the user specifies <code>x</code> and <code>group</code>, but no <code>y</code>, the function
will create new values for <code>x</code> in each <code>group</code>, search for the relevant
data in <code>newdata</code> and provide predictions at values of <code>x</code> in those
groups.</p></li>
<li><p>If the user specifies <code>x</code>, <code>y</code> and <code>group</code>, the function
assumes that these vectors contain additional data on top on what is
already available in <code>newdata</code>. The lengths of <code>x</code>,
<code>y</code> and <code>group</code> must match.
For a light <code>brokenstick</code> object, case effectively becomes
case 6. See below.</p></li>
<li><p>As case 5, but now without <code>newdata</code> available. All data are
specified through <code>x</code>, <code>y</code> and <code>group</code> and form a data frame.
Matching to <code>newdata</code> is attempted, but as long as group id's are
different from the training sample effectively new cases will be
made.</p></li>
</ol>


    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by <a href='https://stefvanbuuren.name'>Stef van Buuren</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


